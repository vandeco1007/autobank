{"ast":null,"code":"import waitForElm from \"../middlewares/waitForElm\";\nimport getHistory from \"./history.controller\";\nimport dateValue from \"../constant/date\";\nconst billControler = () => {\n  waitForElm('#startTime').then(() => {\n    document.getElementById('startTime').value = new Date(dateValue.currentStartDay).getFullYear() + \"-\" + (new Date(dateValue.currentStartDay).getMonth() + 1) + '-' + new Date(dateValue.currentStartDay).getDate() + 'T00:00:01';\n    document.getElementById('endTime').value = new Date(dateValue.currentEndDay).getFullYear() + \"-\" + (new Date(dateValue.currentStartDay).getMonth() + 1) + '-' + new Date(dateValue.currentStartDay).getDate() + 'T23:59:59';\n  });\n  waitForElm('.billPrinter').then(() => {\n    let billingContentBidv = document.getElementsByClassName('bidv')[0];\n    let billingContentVietin = document.getElementsByClassName('vietin')[0];\n    let billingContentVcb = document.getElementsByClassName('vcb')[0];\n    let closeBill = function () {\n      billingContentBidv.style.opacity = '0';\n      billingContentBidv.style.zIndex = '-1';\n      billingContentVietin.style.opacity = '0';\n      billingContentVietin.style.zIndex = '-1';\n      billingContentVcb.style.opacity = '0';\n      billingContentVcb.style.zIndex = '-1';\n    };\n\n    // Click Close Bill\n    document.addEventListener('click', e => {\n      if (e.path[0].getAttribute('class') == 'cancelPrnt') {\n        closeBill();\n        console.log('Click Cancel');\n      }\n    });\n\n    // Press Esc to Close Bill\n    window.addEventListener('keydown', e => {\n      if (e.key === 'Escape') {\n        closeBill();\n        console.log('Esc Cancel');\n      }\n    });\n  });\n  waitForElm('.transHistory').then(() => {\n    function downloadCSVFile(csv, filename) {\n      var csv_file, download_link;\n      csv_file = new Blob([csv], {\n        type: \"text/csv\"\n      });\n      download_link = document.createElement(\"a\");\n      download_link.download = filename;\n      download_link.href = window.URL.createObjectURL(csv_file);\n      download_link.style.display = \"none\";\n      document.body.appendChild(download_link);\n      download_link.click();\n    }\n    document.getElementById(\"download-button\").addEventListener(\"click\", function () {\n      var html = document.getElementsByClassName(\"tableData\")[0].outerHTML;\n      htmlToCSV(html, \"TaiBieu.csv\");\n    });\n    let submitForm = document.getElementById('historyFormSubmit');\n    submitForm.addEventListener('click', () => {\n      let starTime = document.getElementById('startTime').value;\n      let endTime = document.getElementById('endTime').value;\n      let playerChoices = document.getElementById('playerChoices').value;\n      let player = document.getElementById('player').value;\n      if (endTime != '' && starTime != '') {\n        getHistory(new Date(starTime).getTime(), new Date(endTime).getTime(), playerChoices, player, 0);\n      } else {\n        alert('Vui lòng nhập ngày tháng');\n      }\n    });\n    function htmlToCSV(html, filename) {\n      var data = [];\n      var rows = document.querySelectorAll(\"table tr\");\n      for (var i = 0; i < rows.length; i++) {\n        var row = [],\n          cols = rows[i].querySelectorAll(\"td, th\");\n        for (var j = 0; j < cols.length; j++) {\n          row.push(cols[j].innerText);\n        }\n        data.push(row.join(\",\"));\n      }\n      downloadCSVFile(data.join(\"\\n\"), filename);\n    }\n  });\n};\nexport default billControler;","map":{"version":3,"names":["waitForElm","getHistory","dateValue","billControler","then","document","getElementById","value","Date","currentStartDay","getFullYear","getMonth","getDate","currentEndDay","billingContentBidv","getElementsByClassName","billingContentVietin","billingContentVcb","closeBill","style","opacity","zIndex","addEventListener","e","path","getAttribute","console","log","window","key","downloadCSVFile","csv","filename","csv_file","download_link","Blob","type","createElement","download","href","URL","createObjectURL","display","body","appendChild","click","html","outerHTML","htmlToCSV","submitForm","starTime","endTime","playerChoices","player","getTime","alert","data","rows","querySelectorAll","i","length","row","cols","j","push","innerText","join"],"sources":["D:/JOB CODE/autobank/789BET/vietin/autobank/src/controllers/billController.js"],"sourcesContent":["import waitForElm from \"../middlewares/waitForElm\";\r\nimport getHistory from \"./history.controller\";\r\nimport dateValue from \"../constant/date\";\r\n\r\nconst billControler = () => {\r\n    waitForElm('#startTime').then(()=>{\r\n        document.getElementById('startTime').value = new Date(dateValue.currentStartDay).getFullYear()+\"-\"+(new Date(dateValue.currentStartDay).getMonth()+1)+'-'+(new Date(dateValue.currentStartDay).getDate())+'T00:00:01'\r\n        document.getElementById('endTime').value = new Date(dateValue.currentEndDay).getFullYear()+\"-\"+(new Date(dateValue.currentStartDay).getMonth()+1)+'-'+(new Date(dateValue.currentStartDay).getDate())+'T23:59:59'\r\n      })\r\n      \r\n      waitForElm('.billPrinter').then(()=>{\r\n        let billingContentBidv = document.getElementsByClassName('bidv')[0]\r\n        let billingContentVietin = document.getElementsByClassName('vietin')[0]\r\n        let billingContentVcb = document.getElementsByClassName('vcb')[0]\r\n\r\n\r\n        let closeBill = function() {\r\n          billingContentBidv.style.opacity='0'\r\n          billingContentBidv.style.zIndex='-1'\r\n          billingContentVietin.style.opacity='0'\r\n          billingContentVietin.style.zIndex='-1'\r\n          billingContentVcb.style.opacity='0'\r\n          billingContentVcb.style.zIndex='-1'\r\n        }\r\n\r\n        // Click Close Bill\r\n        document.addEventListener('click', e => {\r\n          if(e.path[0].getAttribute('class') == 'cancelPrnt') {\r\n            closeBill();\r\n            console.log('Click Cancel')\r\n          }\r\n        })\r\n\r\n        // Press Esc to Close Bill\r\n        window.addEventListener('keydown', e => {\r\n          if(e.key === 'Escape') {\r\n            closeBill();\r\n            console.log('Esc Cancel')\r\n          }\r\n        })\r\n      })\r\n      \r\n      waitForElm('.transHistory').then(()=>{\r\n        function downloadCSVFile(csv, filename) {\r\n          var csv_file, download_link;\r\n          csv_file = new Blob([csv], {type: \"text/csv\"});\r\n          download_link = document.createElement(\"a\");\r\n          download_link.download = filename;\r\n          download_link.href = window.URL.createObjectURL(csv_file);\r\n          download_link.style.display = \"none\";\r\n          document.body.appendChild(download_link);\r\n          download_link.click();\r\n        }\r\n        document.getElementById(\"download-button\").addEventListener(\"click\", function () {\r\n          var html = document.getElementsByClassName(\"tableData\")[0].outerHTML;\r\n          htmlToCSV(html, \"TaiBieu.csv\");\r\n        });\r\n      \r\n        let submitForm = document.getElementById('historyFormSubmit')\r\n        submitForm.addEventListener('click', ()=>{\r\n          let starTime = document.getElementById('startTime').value\r\n          let endTime = document.getElementById('endTime').value\r\n          let playerChoices = document.getElementById('playerChoices').value\r\n          let player = document.getElementById('player').value\r\n          if(endTime!='' && starTime!=''){\r\n            getHistory(new Date(starTime).getTime(),new Date(endTime).getTime(),playerChoices,player,0)\r\n          }else{\r\n            alert('Vui lòng nhập ngày tháng')\r\n          }\r\n        })\r\n      \r\n        function htmlToCSV(html, filename) {\r\n          var data = [];\r\n          var rows = document.querySelectorAll(\"table tr\");\t\t\t\t\t\r\n          for (var i = 0; i < rows.length; i++) {\r\n            var row = [], cols = rows[i].querySelectorAll(\"td, th\");\t\t\t\t\t\t\r\n            for (var j = 0; j < cols.length; j++) {\r\n              row.push(cols[j].innerText);\r\n            }\r\n            data.push(row.join(\",\"));\t\t\r\n          }\r\n          downloadCSVFile(data.join(\"\\n\"), filename);\r\n        }\r\n      })\r\n}\r\n\r\nexport default billControler;"],"mappings":"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"},"metadata":{},"sourceType":"module"}