{"ast":null,"code":"import dateValue from'../constant/date';var bankLogin=function bankLogin(user,password){var myHeaders=new Headers();myHeaders.append(\"Authorization\",btoa(user+\":\"+password));var requestOptions={method:'GET',headers:myHeaders,redirect:'follow'};if(user=='admin'&&password=='admin'){localStorage.setItem('role','admin');setTimeout(function(){window.location.href='/';},500);}else{fetch(\"http://localhost:8090/TotalControl/v2/login\",requestOptions).then(function(response){return response.json();}).then(function(result){if(result.status==true){console.log(result.value.token);localStorage.setItem('bankUser',user);localStorage.setItem('bankToken',result.value.token);fetch(\"http://localhost:8090/TotalControl/v2/devices?q=all&token=\"+result.value.token,requestOptions).then(function(response){return response.json();}).then(function(result){console.log(result.ids);var loginContainer=document.getElementsByClassName('bankLoginForm')[0];document.getElementsByClassName('bankLoginForm')[0].innerHTML=\"\";result.ids.forEach(function(item){var button=document.createElement('button');var device=document.createTextNode(item);button.appendChild(device);button.setAttribute('id',item);button.setAttribute('class','chooseDevices');loginContainer.appendChild(button);button.addEventListener('click',function(){localStorage.setItem('deviceName',button.getAttribute('id'));if(!localStorage.getItem(button.getAttribute('id'))){localStorage.setItem(button.getAttribute('id'),0);}setTimeout(function(){window.location.href='/';},500);});});}).catch(function(error){return console.log('error',error);});// window.location.reload()\n}else{localStorage.setItem('bankUser',\"Vui Long Dang Nhap Lai\");alert(\"Đăng Nhập Không Chính Xác\");window.location.reload();}}).catch(function(error){return console.log('error',error);});}};export default bankLogin;","map":{"version":3,"names":["dateValue","bankLogin","user","password","myHeaders","Headers","append","btoa","requestOptions","method","headers","redirect","localStorage","setItem","setTimeout","window","location","href","fetch","then","response","json","result","status","console","log","value","token","ids","loginContainer","document","getElementsByClassName","innerHTML","forEach","item","button","createElement","device","createTextNode","appendChild","setAttribute","addEventListener","getAttribute","getItem","catch","error","alert","reload"],"sources":["C:/Users/789bet/Desktop/789bet/Vietin/src/api/bankLogin.js"],"sourcesContent":["import dateValue from '../constant/date'\r\nconst bankLogin = (user,password)=>{\r\n  var myHeaders = new Headers();\r\n  myHeaders.append(\"Authorization\", btoa(user+\":\"+password));\r\n  var requestOptions = {\r\n    method: 'GET',\r\n    headers: myHeaders,\r\n    redirect: 'follow'\r\n  };\r\n  if(user=='admin' && password=='admin'){\r\n    localStorage.setItem('role','admin')\r\n    setTimeout(function(){\r\n      window.location.href='/'\r\n    },500)\r\n  }else{\r\n    fetch(\"http://localhost:8090/TotalControl/v2/login\", requestOptions)\r\n    .then(response => response.json())\r\n    .then(result =>{\r\n      if(result.status==true){\r\n        console.log(result.value.token)\r\n        localStorage.setItem('bankUser',user)\r\n        localStorage.setItem('bankToken',result.value.token)\r\n        fetch(\"http://localhost:8090/TotalControl/v2/devices?q=all&token=\"+result.value.token, requestOptions)\r\n        .then(response => response.json())\r\n        .then(result => {\r\n          console.log(result.ids)\r\n          let loginContainer = document.getElementsByClassName('bankLoginForm')[0]\r\n          document.getElementsByClassName('bankLoginForm')[0].innerHTML=\"\"\r\n          result.ids.forEach((item)=>{\r\n            let button = document.createElement('button')\r\n            let device = document.createTextNode(item)\r\n            button.appendChild(device)\r\n            button.setAttribute('id',item)\r\n            button.setAttribute('class','chooseDevices')\r\n            loginContainer.appendChild(button)\r\n            button.addEventListener('click',function(){\r\n              localStorage.setItem('deviceName',button.getAttribute('id'))\r\n              if(!localStorage.getItem(button.getAttribute('id'))){\r\n                localStorage.setItem(button.getAttribute('id'),0)\r\n              }\r\n              setTimeout(function(){\r\n                window.location.href='/'\r\n              },500)\r\n            })\r\n          })\r\n        })\r\n        .catch(error => console.log('error', error));\r\n        // window.location.reload()\r\n      }else{\r\n        localStorage.setItem('bankUser',\"Vui Long Dang Nhap Lai\")\r\n        alert(\"Đăng Nhập Không Chính Xác\")\r\n        window.location.reload()\r\n      }\r\n    }).catch(error => console.log('error', error));\r\n  }\r\n}\r\n\r\nexport default bankLogin"],"mappings":"AAAA,MAAOA,UAAS,KAAM,kBAAkB,CACxC,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,IAAI,CAACC,QAAQ,CAAG,CACjC,GAAIC,UAAS,CAAG,GAAIC,QAAO,EAAE,CAC7BD,SAAS,CAACE,MAAM,CAAC,eAAe,CAAEC,IAAI,CAACL,IAAI,CAAC,GAAG,CAACC,QAAQ,CAAC,CAAC,CAC1D,GAAIK,eAAc,CAAG,CACnBC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAEN,SAAS,CAClBO,QAAQ,CAAE,QACZ,CAAC,CACD,GAAGT,IAAI,EAAE,OAAO,EAAIC,QAAQ,EAAE,OAAO,CAAC,CACpCS,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CACpCC,UAAU,CAAC,UAAU,CACnBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,GAAG,CAC1B,CAAC,CAAC,GAAG,CAAC,CACR,CAAC,IAAI,CACHC,KAAK,CAAC,6CAA6C,CAAEV,cAAc,CAAC,CACnEW,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAG,MAAM,CAAG,CACb,GAAGA,MAAM,CAACC,MAAM,EAAE,IAAI,CAAC,CACrBC,OAAO,CAACC,GAAG,CAACH,MAAM,CAACI,KAAK,CAACC,KAAK,CAAC,CAC/Bf,YAAY,CAACC,OAAO,CAAC,UAAU,CAACX,IAAI,CAAC,CACrCU,YAAY,CAACC,OAAO,CAAC,WAAW,CAACS,MAAM,CAACI,KAAK,CAACC,KAAK,CAAC,CACpDT,KAAK,CAAC,4DAA4D,CAACI,MAAM,CAACI,KAAK,CAACC,KAAK,CAAEnB,cAAc,CAAC,CACrGW,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAG,MAAM,CAAI,CACdE,OAAO,CAACC,GAAG,CAACH,MAAM,CAACM,GAAG,CAAC,CACvB,GAAIC,eAAc,CAAGC,QAAQ,CAACC,sBAAsB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CACxED,QAAQ,CAACC,sBAAsB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC,EAAE,CAChEV,MAAM,CAACM,GAAG,CAACK,OAAO,CAAC,SAACC,IAAI,CAAG,CACzB,GAAIC,OAAM,CAAGL,QAAQ,CAACM,aAAa,CAAC,QAAQ,CAAC,CAC7C,GAAIC,OAAM,CAAGP,QAAQ,CAACQ,cAAc,CAACJ,IAAI,CAAC,CAC1CC,MAAM,CAACI,WAAW,CAACF,MAAM,CAAC,CAC1BF,MAAM,CAACK,YAAY,CAAC,IAAI,CAACN,IAAI,CAAC,CAC9BC,MAAM,CAACK,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAC5CX,cAAc,CAACU,WAAW,CAACJ,MAAM,CAAC,CAClCA,MAAM,CAACM,gBAAgB,CAAC,OAAO,CAAC,UAAU,CACxC7B,YAAY,CAACC,OAAO,CAAC,YAAY,CAACsB,MAAM,CAACO,YAAY,CAAC,IAAI,CAAC,CAAC,CAC5D,GAAG,CAAC9B,YAAY,CAAC+B,OAAO,CAACR,MAAM,CAACO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAClD9B,YAAY,CAACC,OAAO,CAACsB,MAAM,CAACO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CACnD,CACA5B,UAAU,CAAC,UAAU,CACnBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,GAAG,CAC1B,CAAC,CAAC,GAAG,CAAC,CACR,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAC,CACD2B,KAAK,CAAC,SAAAC,KAAK,QAAIrB,QAAO,CAACC,GAAG,CAAC,OAAO,CAAEoB,KAAK,CAAC,GAAC,CAC5C;AACF,CAAC,IAAI,CACHjC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,wBAAwB,CAAC,CACzDiC,KAAK,CAAC,2BAA2B,CAAC,CAClC/B,MAAM,CAACC,QAAQ,CAAC+B,MAAM,EAAE,CAC1B,CACF,CAAC,CAAC,CAACH,KAAK,CAAC,SAAAC,KAAK,QAAIrB,QAAO,CAACC,GAAG,CAAC,OAAO,CAAEoB,KAAK,CAAC,GAAC,CAChD,CACF,CAAC,CAED,cAAe5C,UAAS"},"metadata":{},"sourceType":"module"}